== USGS Sparql Party: A SPARQL query visualization application

This web application allows users to ... 

This app was originally developed by David Mattli.  

== TODO

Regarding spatial relationship: color the map layers that correspond to the results of the spatial relationship query a new color [this can be done by naming map vector layers when created and then using that name to select and change their color].  Also list the resulting map layers/features in a dropdown list so that the user can select them on the map.

Make the map fullscreen.  Make the dropdown menus slide over from the side.

Color layers different colors

When a user selects a layer on the map, pan over to it, submit sparql query for the features attributes, fill a tooltip with the data as well as the existing modal for the data. Do all of this when a user selects the feature from a dropdown menu as well.    

Prevent map from zooming in too far (which results in error loading the map). This has been partially fixed.  It may still happen though.  

Refactor html code.  Use a for loop in index.html.erb to minimize redundant jquery code.  

Use sparqljs (npm install) to validate sparql queries while they are being edited. sparqljs creates a json object so use JSON.stringify before sending the query. 

Unit testing

== Completed 

Implemented: buffer, boundary [Not sure if boundary is working properly though.  An empty collection is returned from the query]

Implemented: intersection, union, difference, symDifference, distance,

Generalized ajax queries and refactored javascript in home.index.js

Added a dropdown menu to select different operations for the spatial relationship function.

Initial gui for spatial analysis of two features completed.  

Get detailed info/attributes for a single selected feature by selecting it from dropdown.  The data appears in a modal.

Openlayers 2 js files included under app/assets/javascripts instead of using openlayers-rails gem.  The error: "window.controllers is deprecated. Do not use it for UA detection." is caused by firefox not openlayers.

create capacity for more than one openlayer per page

Implemented graphical user interface which allows users to select two features without writing sparql queries.

codeMirror2 used to create in browser text editor for sparql queries

Replace button in edit and create forms with bootstrap buttons

Oracle Spatial is being set up to provide a new USGS sparql endpoint

Search bar and sort sparql queries in index view 

Pagination for index sparql queries view

Automatically submit sparql query when a user navigates to the show page.  Delete the submit query button.

Sparql queries submit successfully 
	The sparql endpoint must be correct, and the response data needs to be in json

Buttons with links are not activated by clicks outside of link but within button borders

Bootstrap javascript components do not work

Get bootstrap 

In endpoints/show.html.haml
  maps not displaying correctly 
    update nationalmaps api code in endpoints.js file under assets  

Fixed by combining endpoints and sparql_queries models 
In sparql_queries/index.html.erb and show.html.erb
  sparql_query.endpoint_id causes error because 
    sparql_queries have a one to many relationship with endpoints
      but are not being assigned an endpoint when they are created 

Simplify forms for submitting sparql queries

